# Codex 작업 워크플로

## 1. 목적
팀원이 누구든 같은 방식으로 Codex를 사용해 일관된 결과를 얻기 위한 운영 가이드

## 2. 기본 원칙
- 문서 먼저, 코드 다음: 큰 변경은 명세를 먼저 확정
- API/DB 변경 시 문서 동시 반영
- 결과물은 "현재 구현(As-Is)"와 "목표 설계(To-Be)"를 구분
- 고비용 생성(영상/대량 호출)은 백그라운드 처리 우선

## 3. 권장 작업 순서
1. 요구사항 정리 (`PRD`, `docs/mvp.md`, `docs/voice_chat_mvp_spec.md`)
2. 계약 확정 (`docs/api.md`, `docs/db_schema.md`)
3. 오케스트레이션 설계 (`docs/orchestrator_design.md`)
4. 구현
5. 검증/리뷰/문서 업데이트

## 4. PR 체크리스트
- [ ] 변경 목적과 범위가 PR 설명에 명확한가
- [ ] API 변경 시 `docs/api.md` 갱신했는가
- [ ] DB 변경 시 `docs/db_schema.md` 갱신했는가
- [ ] 에이전트 책임 변경 시 `docs/orchestrator_design.md` 갱신했는가
- [ ] 사용자 플로우 영향(텍스트/음성) 테스트했는가

## 5. 커밋 컨벤션
- `docs:` 문서 변경
- `feat:` 기능 추가
- `fix:` 버그 수정
- `refactor:` 리팩터링
- `chore:` 환경/설정/잡무

예시:
- `docs: 음성 대화형 MVP 명세 추가`
- `feat: 음성 턴 API와 STT 슬롯 업데이트 추가`
- `fix: 브리프 게이트 판정 오류 수정`

## 6. 데모 리허설 최소 시나리오
1. 세션 시작
2. 3~6턴 질문/응답으로 브리프 채우기
3. 전략 생성 확인
4. 카피/포스터 생성 확인
5. 영상 프롬프트/보이스 스크립트 확인
6. 이력 저장/재조회 확인
