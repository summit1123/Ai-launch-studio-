# TEAM 협업 가이드

## 1. 문서 목적
- 팀 분업(오케스트레이터/에이전트/프론트/미디어) 시 충돌을 줄이고 통합 속도를 높이기 위한 기준 문서
- 작업 순서, 소유권, 리뷰 기준, 머지 기준을 명확히 정의

## 2. 현재 협업 전략
- 오케스트레이터를 먼저 안정적으로 기동한다.
- 각 에이전트는 독립 브랜치에서 병렬로 개발한다.
- 통합은 오케스트레이터 계약(API/스키마/이벤트)에 맞춰 순차 반영한다.

## 3. 역할 분담 (MVP)
- 오케스트레이터 오너
  - 담당: 상태머신, 라우팅, 타임아웃/재시도, 이벤트 스트림, 통합 검증
  - 현재 책임자: 사용자
- 플래너/게이트 담당
  - 담당: 슬롯 추출, confidence, 게이트 판정
- 리서치 담당
  - 담당: 시장/경쟁/채널 조회 로직, 근거 메타데이터 표준화, 리서치 폴백
- 전략/크리에이티브 담당
  - 담당: 전략/카피/포스터/영상 프롬프트 출력 계약
- 보이스 담당
  - 담당: STT/TTS, 보이스 에이전트, 음성 턴 API
- 프론트 담당
  - 담당: 챗 UI, 음성 입력/재생 UI, 상태 표시
- 운영/품질 담당
  - 담당: 테스트/로깅/런북/릴리즈 노트

## 4. 브랜치/머지 규칙
- 메인 브랜치: `main`
- 기능 브랜치 접두사: 없음 (팀 자율)
- 권장 브랜치 예시
  - `orchestrator-core`
  - `agent-planner-gate`
  - `agent-research`
  - `agent-strategy-creative`
  - `agent-voice`
  - `frontend-chat-voice`
- 머지 조건
  - 스키마 호환성 확인
  - 테스트 통과
  - 관련 문서 동시 갱신

## 5. 공통 계약 (필수 준수)
- API 계약: `docs/api.md`
- DB 계약: `docs/db_schema.md`
- 오케스트레이션 상태/이벤트: `docs/orchestrator_design.md`
- 보이스 계약: `docs/voice_agent.md`
- 출력 스키마 계약: `docs/prompt_contracts.md`
- 검증 절차: `docs/test_runbook.md`

## 6. 작업 순서 (팀 공통)
1. 문서 확인
- `PRD.md`, `docs/mvp.md`, `docs/voice_chat_mvp_spec.md`, `docs/prompt_contracts.md`
2. 구현 범위 확정
- 변경 범위를 이슈/PR 설명에 명시
3. 구현
- 한 커밋=한 책임
4. 검증
- 명령/기대 결과를 PR 본문에 기록
5. 문서 반영
- API/DB/플로우 변경 시 관련 문서 갱신

## 7. PR 템플릿 (요약)
- 목적: 무엇을 왜 바꿨는지
- 범위: 어떤 파일을 건드렸는지
- 계약 영향: API/DB/스키마 변경 여부
- 검증: 실행 명령 + 결과
- 리스크: 남은 이슈/후속 작업

## 8. 통합 체크리스트
- [ ] 텍스트 입력 경로 완주 가능
- [ ] 음성 입력 경로 완주 가능
- [ ] 텍스트+음성 혼합 경로 완주 가능
- [ ] 게이트 미충족 시 생성 차단
- [ ] 게이트 충족 시 `RUN_RESEARCH -> GEN_STRATEGY -> GEN_CREATIVES` 완료
- [ ] 이력 저장/재조회 가능

## 9. 충돌 방지 원칙
- 오케스트레이터 파일 변경은 오너 리뷰 필수
- 스키마 파일 변경 시 사전 합의 필수
- 같은 파일 동시 대규모 수정 금지
- 공유 파일 변경 전 작은 사전 커밋으로 계약 먼저 고정

## 10. 스킬 사용 원칙
- OpenAI 스펙 확인 필요 시: `openai-docs` 우선
- 프로젝트 실행 규칙: `skills/launch-studio-mvp/SKILL.md` 준수
- 스킬 갱신 시: `docs/skills_guide.md`와 함께 업데이트
